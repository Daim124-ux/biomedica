!function(p){XTSThemeModule.$document.on("xtsProductTabLoaded xtsPjaxComplete",function(){XTSThemeModule.productsLoadMore()}),XTSThemeModule.productsLoadMore=function(){var l=".xts-load-more.xts-type-shop.xts-action-infinite",u=!1,i=(p(".xts-products").each(function(){var a=p(this),r=[],t=a.attr("id"),s=p('.xts-arrows-loader[data-id="'+t+'"]'),d=p('.xts-ajax-arrows[data-id="'+t+'"]');function o(){var t,o,e;d.length<=0||(o=XTSThemeModule.$window.height()/2,t=XTSThemeModule.$window.scrollTop(),o=a.offset().top-o,e=d.find(".xts-prev").outerHeight(),e=a.height()-e,t<o||o+e<t?(d.removeClass("xts-shown"),s.removeClass("xts-shown")):(d.addClass("xts-shown"),s.addClass("xts-shown")))}d.length<=0||(r[1]={items:a.html(),status:"have-posts"},XTSThemeModule.$window.on("scroll",function(){o()}),setTimeout(function(){o()},500),d.find(".xts-prev, .xts-next").on("click",function(t){t.preventDefault();t=p(this);if(!u&&!t.hasClass("xts-disabled")){u=!0,clearInterval(void 0);var o=t.parent().data("id"),e=p("#"+o),o=e.data("source"),a=xts_settings.ajaxurl,s=e.data("atts"),d=e.data("paged"),n=t.parent().find(".xts-next"),l=t.parent().find(".xts-prev");if(d++,t.hasClass("xts-prev")){if(d<2)return;d-=2}s={paged:d,atts:s,action:"xts_get_product_"+o};s.atts.loop=e.find(".xts-col").last().data("loop"),i(a,s,"POST",t,r,d,e,function(t){var o;t.items&&(e.hasClass("xts-masonry-layout")?(o=p(t.items),e.html(o).isotope("appended",o),e.imagesLoaded().progress(function(){e.isotope("layout")})):e.html(t.items),c(),e.data("paged",d)),XTSThemeModule.isMobileSize&&p("html, body").stop().animate({scrollTop:e.offset().top-150},400),1<d?l.removeClass("xts-disabled"):l.addClass("xts-disabled"),"no-more-posts"===t.status?n.addClass("xts-disabled"):n.removeClass("xts-disabled")})}}))}),XTSThemeModule.clickOnScrollButton(l,!1),p(".xts-load-more.xts-type-shop").on("click",function(t){var e,a,s,d,o,n;t.preventDefault(),u||(u=!0,t=(e=p(this)).data("id"),a=p("#"+t),s=a.data("source"),t=xts_settings.ajaxurl,n=a.data("atts"),d=a.data("paged"),o="POST",d++,e.addClass("xts-loading"),n={paged:d,atts:n,action:"xts_get_product_"+s},"main_loop"===s?(t=e.attr("href"),o="GET",n={loop:a.find(".xts-col").last().data("loop")}):n.atts.loop=a.find(".xts-col").last().data("loop"),i(t,n,o,e,[],d,a,function(t){var o;t.items&&(a.hasClass("xts-masonry-layout")?(o=p(t.items),a.append(o).isotope("appended",o),a.imagesLoaded().progress(function(){a.isotope("layout")})):a.append(t.items),c(),a.imagesLoaded().progress(function(){XTSThemeModule.clickOnScrollButton(l,!0)}),a.data("paged",d),"main_loop"===s)&&e.attr("href",t.nextPage),"no-more-posts"===t.status&&e.remove()}))}),function(t,o,e,a,s,d,n,l){var r,i;s[d]?(n.addClass("xts-loading"),setTimeout(function(){l(s[d]),n.removeClass("xts-loading"),u=!1},300)):(r=n.attr("id"),(i=p('.xts-arrows-loader[data-id="'+r+'"]')).addClass("xts-loading"),n.addClass("xts-loading"),"GET"===e&&(t=XTSThemeModule.removeURLParameter(t,"loop")),p.ajax({url:t,data:o,dataType:"json",method:e,success:function(t){s[d]=t,l(t),"yes"===xts_settings.load_more_button_page_url&&(window.history.pushState("","",t.currentPage+window.location.search),p(".woocommerce-breadcrumb").replaceWith(t.breadcrumbs))},error:function(){console.log("ajax error")},complete:function(){a.removeClass("xts-loading"),i.removeClass("xts-loading"),n.removeClass("xts-loading"),u=!1}}))}),c=function(){XTSThemeModule.$document.trigger("xtsProductLoadMoreReInit")}},p(document).ready(function(){XTSThemeModule.productsLoadMore()})}(jQuery);