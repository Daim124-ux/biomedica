var xtsFramework;!function(w){"use strict";var u;u={optionsPage:function(){function s(t,e,s){var i=!1;(i=t&&(t=t.split("tab="))[1]?t[1]:i)&&0!==(t=w('.xts-sections-nav [data-id="'+i+'"]')).length&&(t.trigger("click"),e)&&(s.preventDefault(),e.parent().parent().find(".current").removeClass("current"),e.parent().addClass("current"))}w(".xts-options").each(function(){var s=w(this),i=s.find(".xts-last-tab-input");s.on("click",".xts-sections-nav a",function(t){t.preventDefault();var t=w(this),e=t.data("id");i.val(e),s.find(".xts-fields-section.xts-fields-section").removeClass("xts-active-section").addClass("xts-hidden"),s.find('.xts-fields-section[data-id="'+e+'"]').addClass("xts-active-section").removeClass("xts-hidden"),s.find(".xts-active-nav").removeClass("xts-active-nav"),s.find('a[data-id="'+e+'"]').parent().addClass("xts-active-nav"),t.parent().hasClass("xts-subsection-nav")&&t.parent().parent().parent().addClass("xts-active-nav"),t.parent().hasClass("xts-has-child")&&(e=t.parent().find(".xts-subsection-nav").first().find("> a").data("id"),t.parent().find(".xts-subsection-nav").first().addClass("xts-active-nav"),s.find(".xts-fields-section.xts-fields-section").removeClass("xts-active-section").addClass("xts-hidden"),s.find('.xts-fields-section[data-id="'+e+'"]').addClass("xts-active-section").removeClass("xts-hidden"),i.val(e)),w(document).trigger("xts_section_changed")}),w(document).trigger("xts_section_changed"),s.on("click",".xts-reset-options-btn",function(t){return confirm("All your options will be reset to default values. Continue?")})}),w(".toplevel_page_xtemos_options").parent().find("li a").on("click",function(t){var e=w(this);s(e.attr("href"),e,t)}),w(".xts-options-message").length<=0&&s(window.location.href,!1,!1)},typographyControlInit:function(){w(".xts-active-section .xts-advanced-typography-field").length<=0||w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_get_theme_settings_typography_data",security:xtsAdminConfig.get_theme_settings_data_nonce},dataType:"json",success:function(t){u.typographyControl(t.typography)},error:function(){console.log("AJAX error")}})},optionsPresetsCheckbox:function(t){var e,s=w(".xts-options").find(".xts-fields-to-save"),i=t.parents(".xts-field"),n=t.prop("checked"),t=t.data("name");n?(i.addClass("xts-field-disabled"),n=t,e=s.val().split(","),-1<(n=e.indexOf(n))&&(e.splice(n,1),s.val(e.join(",")))):(i.removeClass("xts-field-disabled"),n=t,e=s.val(),-1<(i=e.split(",")).indexOf(n)||(0==e.length?i=[n]:i.push(n),s.val(i.join(","))))},optionsPresets:function(){var t=w(".xts-options"),e=t.find(".xts-inherit-checkbox-wrapper input"),i=t.find(".xts-presets-wrapper"),s=i.data("current-id"),n=i.find('[name="_wpnonce"]').val(),a=i.data("base-url"),o=i.data("preset-url");function l(t){i.html(w(t).html()),r()}function r(){i.find(".xts-condition-rules .xts-rule").each(function(){var e=w(this);e.find(".xts-rule-value-id").select2({ajax:{url:xtsAdminConfig.ajaxUrl,data:function(t){return{action:"xts_get_entity_ids_action",type:e.find(".xts-rule-type").val(),security:n,name:t.term}},method:"POST",dataType:"json"},theme:"xts",dropdownAutoWidth:!1,width:"resolve"})})}function d(){return i.hasClass("xts-presets-loading")}function c(){i.addClass("xts-presets-loading")}function p(){i.removeClass("xts-presets-loading")}r(),i.on("click",".xts-add-new-preset",function(t){t.preventDefault(),d()||(t=prompt("Enter new preset name","New preset"))&&0!=t.length&&(c(),w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_new_preset_action",name:t,preset:s,security:n},dataType:"json",success:function(t){t.ui&&10<t.ui.length&&(window.location=o+t.id),u.hideNotice()},error:function(t){window.location=a,console.log("ajax error",t)},complete:function(){p()}}))}).on("click",".xts-remove-preset-btn",function(t){var e;t.preventDefault(),!d()&&confirm("Are you sure you want to remove this preset?")&&(e=w(this).data("id"),c(),w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_remove_preset_action",id:e,preset:s,security:n},dataType:"json",success:function(t){t.ui&&10<t.ui.length&&(e==s?window.location=a:l(t.ui)),u.hideNotice()},error:function(t){window.location=a,console.log("ajax error",t)},complete:function(){p()}}))}).on("submit","form",function(t){t.preventDefault();var e=[],t=i.find("form .xts-input-edit-preset-rule").val();i.find("form").find(".xts-rule").each(function(){e.push({type:w(this).find(".xts-rule-type").val(),comparison:w(this).find(".xts-rule-comparison").val(),post_type:w(this).find(".xts-rule-post-type").val(),taxonomy:w(this).find(".xts-rule-taxonomy").val(),custom:w(this).find(".xts-rule-custom").val(),value_id:w(this).find(".xts-rule-value-id").val(),user_role:w(this).find(".xts-rule-user-role").val()})}),c(),w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_save_preset_conditions_action",data:e,preset:s,name:t,security:n},dataType:"json",success:function(t){t.ui&&10<t.ui.length&&(l(t.ui),w(".xts-presets-wrapper .xts-presets-response").html('<div class="xts-notice xts-success">'+t.success_msg+"</div>")),u.hideNotice()},error:function(t){w(".xts-presets-wrapper .xts-presets-response").html('<div class="xts-notice xts-error">'+t.error_msg+"</div>")},complete:function(){p()}})}).on("click",".xts-add-preset-rule",function(t){t.preventDefault();t=i.find(".xts-rule-template").clone();t.find(".xts-rule").removeClass("xts-hidden"),i.find(".xts-condition-rules").append(t.html()),r()}).on("click",".xts-edit-preset-rule, .xts-presets-title-inner:not(.xts-edit)",function(t){t.preventDefault();t=w(".xts-input-edit-preset-rule");t.hasClass("xts-edit")||(t.addClass("xts-edit"),i.find(".xts-presets-title span").text("").append('<input type="text" class="xts-name-preset" value="'+t.val()+'">'),w(".xts-edit-preset-rule").hide(),w(".xts-presets-title-inner").addClass("xts-edit"),w(document).on("change",".xts-name-preset",function(){w(".xts-input-edit-preset-rule").val(w(this).val())}),w(document).on("mouseup",function(t){var e=i.find(".xts-presets-title"),s=e.find(".xts-name-preset").val();w(".xts-name-preset").is(t.target)||(e.find("span").text("").append(s),w(".xts-input-edit-preset-rule").val(s).removeClass("xts-edit"),w(".xts-edit-preset-rule").show(),w(".xts-presets-title-inner").removeClass("xts-edit"),w(document).off("mouseup"))}))}).on("click",".xts-remove-preset-rule",function(t){t.preventDefault(),w(this).parent().remove()}).on("change",".xts-rule-type",function(t){var e=w(this),s=e.parents(".xts-rule"),i=s.find(".xts-rule-post-type"),n=s.find(".xts-rule-taxonomy"),a=s.find(".xts-rule-custom"),o=s.find(".xts-rule-value-wrapper"),l=s.find(".xts-rule-user-role");switch(e.val()){case"post_type":i.show(),n.hide(),a.hide(),o.hide(),l.hide();break;case"taxonomy":i.hide(),n.show(),a.hide(),o.hide(),l.hide();break;case"post_id":case"term_id":case"single_posts_term_id":i.hide(),n.hide(),a.hide(),o.show(),l.hide();break;case"custom":i.hide(),n.hide(),a.show(),o.hide(),l.hide();break;case"user_role":i.hide(),n.hide(),a.hide(),o.hide(),l.show()}}),e.on("change",function(){u.optionsPresetsCheckbox(w(this))})},switcherControl:function(){var t=w(".xts-active-section .xts-switcher-control");t.length<=0||t.each(function(){var t=w(this),e=t.find(".xts-switcher-btn"),s=t.find('input[type="hidden"]');t.hasClass("xts-field-inited")||(e.on("click",function(){e.hasClass("xts-active")?(s.val(0).trigger("change"),e.removeClass("xts-active")):(s.val(1).trigger("change"),e.addClass("xts-active"))}),t.addClass("xts-field-inited"))})},buttonsControl:function(){var t=w(".xts-active-section .xts-buttons-control");t.length<=0||t.each(function(){var s=w(this),i=s.find('input[type="hidden"]');s.hasClass("xts-field-inited")||(s.on("click",".xts-set-item",function(){var t,e=w(this);e.hasClass("xts-btns-set-active")||(t=e.data("value"),s.find(".xts-btns-set-active").removeClass("xts-btns-set-active"),e.addClass("xts-btns-set-active"),i.val(t).trigger("change"))}),s.addClass("xts-field-inited"))})},colorControl:function(){var t=w(".xts-active-section .xts-color-control");t.length<=0||t.each(function(){var t=w(this),e=t.find('input[type="text"]');t.hasClass("xts-field-inited")||(e.wpColorPicker(),t.addClass("xts-field-inited"))})},checkboxControl:function(){var t=w(".xts-active-section .xts-checkbox-control");t.length<=0||t.each(function(){var t=w(this).find("input");t.hasClass("xts-field-inited")||(t.on("change",function(){t.prop("checked")?t.val("on"):t.val("off")}),t.addClass("xts-field-inited"))})},uploadControl:function(e){var t=w(".xts-active-section .xts-upload-control");(t=e?w(".widget-content .xts-upload-control"):t).length<=0||t.each(function(){var t=w(this),s=t.find(".xts-btn-remove"),i=t.find("input.xts-upload-input-url"),n=t.find("input.xts-upload-input-id"),a=t.find(".xts-upload-preview"),o=t.find(".xts-upload-preview-input");t.hasClass("xts-field-inited")&&!e||(t.off("click").on("click",".xts-upload-btn, img",function(t){t.preventDefault();var e=wp.media({title:"Insert file",button:{text:"Use this file"},multiple:!1}).on("select",function(){var t=e.state().get("selection").first().toJSON();n.val(t.id).trigger("change"),i.val(t.url.split(xtsAdminConfig.wpUploadDir.baseurl)[1]),o.val(t.url.split(xtsAdminConfig.wpUploadDir.baseurl)[1]),a.find("img").remove(),a.prepend('<img src="'+t.url+'" />'),s.addClass("xts-active")}).open()}),s.on("click",function(t){t.preventDefault(),1==a.find("img").length?a.find("img").remove():a.find("input").val(""),o.val(""),n.val("").trigger("change"),i.val(""),s.removeClass("xts-active")}),t.addClass("xts-field-inited"))})},uploadListControl:function(e){var t=w(".xts-active-section .xts-upload_list-control");(t=e?w(".widget-content .xts-upload_list-control"):t).length<=0||t.each(function(){var t=w(this),i=t.find("input.xts-upload-input-id"),n=t.find(".xts-upload-preview"),a=t.find(".xts-btn-remove");t.hasClass("xts-field-inited")&&!e||(t.off("click").on("click",".xts-upload-btn, img",function(t){t.preventDefault();var e=wp.media({title:"Insert file",button:{text:"Use this file"},multiple:!0}).on("select",function(){var t=e.state().get("selection"),s=i.val();t.map(function(t){var e;(t=t.toJSON()).id&&(e=(t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail:t).url,s=s?s+","+t.id:t.id,n.append('<div data-attachment_id="'+t.id+'"><img src="'+e+'"><a href="#" class="xts-remove"><span class="dashicons dashicons-dismiss"></span></a></div>'))}),i.val(s).trigger("change"),a.addClass("xts-active")}).open()}),n.on("click",".xts-remove",function(t){t.preventDefault(),w(this).parent().remove();var e="";n.find("div").each(function(){var t=w(this).attr("data-attachment_id");e=e+t+","}),i.val(e).trigger("change"),e||a.removeClass("xts-active")}),a.on("click",function(t){t.preventDefault(),n.empty(),i.val("").trigger("change"),a.removeClass("xts-active")}),t.addClass("xts-field-inited"))})},selectControl:function(t){var s,e=w(".xts-active-section .xts-select.xts-select2:not(.xts-autocomplete)");0<(e=t?w(".widget-content .xts-select.xts-select2:not(.xts-autocomplete)"):e).length&&(s={width:"100%",allowClear:!0,theme:"xts",placeholder:{id:"0",text:"Select"}},e.each(function(){var e=w(this);e.hasClass("xts-field-inited")||(e.attr("multiple")&&(e.on("select2:select",function(t){t=w(t.params.data.element);w(this).append(t),w(this).trigger("change.select2")}),e.parent().find(".xts-select2-all").on("click",function(t){t.preventDefault(),e.select2("destroy").find("option").prop("selected","selected").end().select2(s)}),e.parent().find(".xts-deselect2-all").on("click",function(t){t.preventDefault(),e.select2("destroy").find("option").prop("selected",!1).end().select2(s)})),0<e.parents("#widget-list").length)||(e.select2(s),e.addClass("xts-field-inited"))})),w(".xts-active-section .xts-select.xts-select2.xts-autocomplete").each(function(){var e=w(this),s=e.data("type"),i=e.data("value"),n=e.data("search"),t="Select";e.hasClass("xts-field-inited")||e.parents(".xts-item-template").length||(void 0!==e.data("placeholder")&&(t=e.data("placeholder")),e.select2({theme:"xts",allowClear:!0,placeholder:t,dropdownAutoWidth:!1,width:"resolve",ajax:{url:xtsAdminConfig.ajaxUrl,data:function(t){return{action:n,type:s,value:i,params:t,selected:e.val()}},method:"POST",dataType:"json",delay:250,processResults:function(t){return{results:t}},cache:!0}}),e.addClass("xts-field-inited"))})},backgroundControl:function(){var t=w(".xts-active-section .xts-background-control");t.length<=0||t.each(function(){var t=w(this),s=t.find(".xts-btn-remove"),i=t.find("input.xts-upload-input-url"),n=t.find("input.xts-upload-input-id"),a=t.find(".xts-upload-preview"),e=t.find('.xts-bg-color input[type="text"]'),o=t.find(".xts-bg-preview"),l=t.find(".xts-bg-repeat"),r=t.find(".xts-bg-size"),d=t.find(".xts-bg-attachment"),c=t.find(".xts-bg-position"),p=t.find(".xts-bg-image-options"),u=t.find(".xts-bg-position-custom"),f=t.find(".xts-bg-position-custom .xts-position-x input"),h=t.find(".xts-bg-position-custom .xts-position-y input"),x={};function v(){x.backgroundColor=e.val(),x.backgroundImage="url("+xtsAdminConfig.wpUploadDir.baseurl+i.val()+")",x.backgroundRepeat=l.val(),x.backgroundSize=r.val(),x.backgroundAttachment=d.val(),"custom"===c.val()?x.backgroundPosition=f.val()+"px "+h.val()+"px":x.backgroundPosition=c.val(),x.height=100,x.backgroundColor||i.val()?o.css(x).show():o.hide()}t.hasClass("xts-field-inited")||(e.wpColorPicker({change:function(){v()},clear:function(){v()}}),t.find("select").select2({allowClear:!0,theme:"xts",dropdownAutoWidth:!1,width:"resolve"}),t.on("click",".xts-upload-btn, img",function(t){t.preventDefault();var e=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).on("select",function(){var t=e.state().get("selection").first().toJSON();i.val(t.url.split(xtsAdminConfig.wpUploadDir.baseurl)[1]),n.val(t.id),a.find("img").remove(),a.prepend('<img src="'+t.url+'" />'),s.addClass("xts-active"),p.addClass("xts-active"),v()}).open()}),s.on("click",function(t){t.preventDefault(),a.find("img").remove(),n.val(""),i.val(""),p.removeClass("xts-active"),s.removeClass("xts-active"),v()}),t.on("change","select, .xts-position-x input, .xts-position-y input",function(){v(),"custom"===c.val()?u.addClass("xts-active"):u.removeClass("xts-active")}),t.addClass("xts-field-inited"))})},customFontsControl:function(){var t=w(".xts-active-section .xts-custom-fonts");t.length<=0||t.each(function(){var i=w(this);i.hasClass("xts-field-inited")||(i.on("click",".xts-custom-fonts-btn-add",function(t){t.preventDefault();var t=i.find(".xts-custom-fonts-template").clone(),e=i.data("key")+1,s=(i.find(".xts-custom-fonts-sections").append(t),/{{index}}/gi);t.removeClass("xts-custom-fonts-template hide").html(t.html().replace(s,e)).attr("data-id",t.attr("data-id").replace(s,e)),i.data("key",e),u.uploadControl(!1)}),i.on("click",".xts-custom-fonts-btn-remove",function(t){t.preventDefault(),w(this).parent().parent().remove()}),i.addClass("xts-field-inited"))})},typographyControl:function(v){var m,g,y,p,t=w(".xts-active-section .xts-advanced-typography-field");function n(t,e){var s=t.find('[data-id="'+e+'"]'),i=s.find(".xts-typography-family"),n=s.find(".xts-typography-family-input"),a=s.find(".xts-typography-google-input"),o=s.find(".xts-typography-custom-input"),l=s.find(".xts-typography-custom-selector"),t=s.find(".xts-typography-selector"),e=s.find(".xts-typography-transform"),r=s.find(".xts-typography-color"),d=s.find(".xts-typography-color-hover"),c=s.find(".xts-typography-color-active"),p=s.find(".xts-typography-responsive-controls"),u=(""!==i.data("value")&&i.val(i.data("value")),C(s,!0,!1),s.find(".xts-typography-family, .xts-typography-style, .xts-typography-subset").on("change",function(){C(s,!1,!1)}),[{id:"",text:""}]),f={text:"Custom fonts",children:[]},h={text:"Standard fonts",children:[]},x={text:"Google fonts",children:[]};w.map(v.stdfonts,function(t,e){h.children.push({id:e,text:t,selected:e==i.data("value")})}),w.map(v.googlefonts,function(t,e){x.children.push({id:e,text:e,google:!0,selected:e==i.data("value")})}),w.map(v.customFonts,function(t,e){f.children.push({id:e,text:e,selected:e==i.data("value")})}),0<f.children.length&&u.push(f),u.push(h),u.push(x),i.on("select change click",function(){i.hasClass("xts-field-inited")||(i.addClass("xts-field-inited"),i.empty(),i.select2({data:u,allowClear:!0,theme:"xts",dropdownAutoWidth:!1,width:"resolve"}).on("select2:selecting",function(t){var t=t.params.args.data,e=t.text;n.attr("value",e),g=t,C(s,!(m=!0),!0)}).on("select2:unselecting",function(t){w(this).one("select2:opening",function(t){t.preventDefault()})}).on("select2:unselect",function(t){n.val(""),a.val("false"),i.val(null).trigger("change"),C(s,!1,!0)}),i.select2("open"))}),t.select2(y).on("select2:selecting",function(t){"custom"==t.params.args.data.id&&(o.val(!0),l.removeClass("hide"))}).on("select2:unselect",function(t){console.log(t),"custom"==t.params.data.id&&(o.val(""),l.val("").addClass("hide"))}),e.select2(y),r.wpColorPicker({change:function(t,e){setTimeout(function(){b(s)},5)}}),d.wpColorPicker(),c.wpColorPicker(),p.on("click",".xts-typography-responsive-opener",function(){w(this).parent().find(".xts-typography-control-tablet, .xts-typography-control-mobile").toggleClass("show hide")}).on("change","input",function(){b(s)})}function b(t){var t={familyInput:t.find(".xts-typography-family-input"),weightInput:t.find(".xts-typography-weight-input"),preview:t.find(".xts-typography-preview"),sizeInput:t.find(".xts-typography-size-container .xts-typography-control-desktop input"),heightInput:t.find(".xts-typography-height-container .xts-typography-control-desktop input"),colorInput:t.find(".xts-typography-color")},e=t.sizeInput.val(),s=t.heightInput.val(),i=t.weightInput.val(),n=t.colorInput.val(),a=t.familyInput.val(),s=s||e;t.preview.css("font-weight",i).css("font-family",a+", sans-serif").css("font-size",e+"px").css("line-height",s+"px"),"none"==a||""==a?w(t.preview).parent().hide():w(t.preview).parent().show(),n&&(i="#444444",""!==n&&(n=n.replace("#",""),i=128<=(299*parseInt(n.substr(0,2),16)+587*parseInt(n.substr(2,2),16)+114*parseInt(n.substr(4,2),16))/1e3?"#444444":"#ffffff"),console.log(n),t.preview.css("color","#"+n).css("background-color",i)),t.preview.slideDown()}function C(t,e,s){var i,n,a,o={family:t.find(".xts-typography-family"),familyInput:t.find(".xts-typography-family-input"),style:t.find("select.xts-typography-style"),styleInput:t.find(".xts-typography-style-input"),weightInput:t.find(".xts-typography-weight-input"),subsetInput:t.find(".xts-typography-subset-input"),subset:t.find("select.xts-typography-subset"),googleInput:t.find(".xts-typography-google-input"),preview:t.find(".xts-typography-preview"),sizeInput:t.find(".xts-typography-size-container .xts-typography-control-desktop input"),heightInput:t.find(".xts-typography-height-container .xts-typography-control-desktop input"),colorInput:t.find(".xts-typography-color")},l=(l=o.familyInput.val())||null,r=o.style.val(),d=o.subset.val(),c=(!0===m?(a=g.google,o.googleInput.val(a)):a=u.makeBool(o.googleInput.val()),e&&(r=o.style.data("value"),d=o.subset.data("value"),""!==r&&(r=String(r)),d=String(d)),void 0===v.googlefonts&&(a=!1),""),c=!0===a&&l in v.googlefonts?v.googlefonts[l]:p;o.subsetInput.val(d),(m||e||s)&&(i='<option value=""></option>',!0===a?(n="",w.each(c.variants,function(t,e){e.id===r||1===u.size(c.variants)?(n=' selected="selected"',r=e.id):n="",i+='<option value="'+e.id+'"'+n+">"+e.name.replace(/\+/g," ")+"</option>"}),o.subset.data("select2")&&o.style.select2("destroy"),o.style.html(i),o.style.select2(y),n="",i='<option value=""></option>',w.each(c.subsets,function(t,e){e.id===d||1===u.size(c.subsets)?(n=' selected="selected"',d=e.id,o.subset.val(d)):n="",i+='<option value="'+e.id+'"'+n+">"+e.name.replace(/\+/g," ")+"</option>"}),o.subset.data("select2")&&o.subset.select2("destroy"),o.subset.html(i),o.subset.select2(y),o.subset.parent().fadeIn("fast")):c&&(w.each(c,function(t,e){t===r||"normal"===t?(n=' selected="selected"',o.style.find(".select2-chosen").text(e)):n="",i+='<option value="'+t+'"'+n+">"+e.replace("+"," ")+"</option>"}),o.subset.data("select2")&&o.style.select2("destroy"),o.style.html(i),o.style.select2(y),o.subset.parent().fadeOut("fast")),o.familyInput.val(l)),0===o.style.find("option[value='"+r+"']").length?(r="",o.style.val("")):"400"===r&&o.style.val(r),-1!==r.indexOf("italic")?(o.preview.css("font-style","italic"),o.styleInput.val("italic"),r=r.replace("italic","")):(o.preview.css("font-style","normal"),o.styleInput.val("")),o.weightInput.val(r),0===o.subset.find("option[value='"+d+"']").length&&(d="",o.subset.val(""),o.subsetInput.val(d)),a&&(e=r,s=d,null!=(a=l))&&"inherit"!=a&&(a=a.replace(/\s+/g,"+"),e&&""!==e&&(a+=":"+e.replace(/\-/g," ")),s&&""!==s&&(a+="&subset="+s),"undefined"!=typeof WebFont)&&WebFont&&WebFont.load({google:{families:[a]}}),b(t),m=!1}t.length<=0||(y={width:"100%",allowClear:!(m=!(g=[])),theme:"xts"},p={100:"Thin 100",200:"Extra Light 200",300:"Light 300",400:"Normal 400",500:"Medium 500",600:"Semi Bold 600",700:"Bold 700",800:"Extra Bold 800",900:"Black 900","100italic":"Thin 100 Italic","200italic":"Extra Light 200 Italic","300italic":"Light 300 Italic","400italic":"Normal 400 Italic","500italic":"Medium 500 Italic","600italic":"Semi Bold 600 Italic","700italic":"Bold 700 Italic","800italic":"Extra Bold 800 Italic","900italic":"Black 900 Italic"},t.each(function(){var i=w(this);i.hasClass("xts-field-inited")||(i.find(".xts-typography-section:not(.xts-typography-template)").each(function(){var t=w(this).data("id");n(i,t)}),i.on("click",".xts-typography-btn-add",function(t){t.preventDefault();var t=i.find(".xts-typography-template").clone(),e=i.data("key")+1,s=(i.find(".xts-typography-sections").append(t),/{{index}}/gi);t.removeClass("xts-typography-template hide").html(t.html().replace(s,e)).attr("data-id",t.attr("data-id").replace(s,e)),i.data("key",e),n(i,t.attr("data-id"))}),i.on("click",".xts-typography-btn-remove",function(t){t.preventDefault(),w(this).parents(".xts-typography-section").remove()}),i.addClass("xts-field-inited"))}))},makeBool:function(t){return"false"!=t&&"0"!=t&&!1!==t&&0!==t&&("true"==t||"1"==t||!0===t||1==t||void 0)},size:function(t){var e,s=0;for(e in t)t.hasOwnProperty(e)&&s++;return s},megaMenu:function(){w(".xts-design select").on("change",function(){var t=w(this).val(),e=w(this).parents("li").find(".xts-block"),s=w(this).parents("li").find(".xts-width"),i=w(this).parents("li").find(".xts-height"),n=w(this).parents("li").find(".xts-dropdown-ajax");"full"===t&&(e.show(),n.show(),s.hide(),i.hide()),"container"===t&&(e.show(),n.show(),s.hide(),i.hide()),"sized"===t&&(e.show(),n.show(),s.show(),i.show()),"default"===t&&(e.show(),n.hide(),s.hide(),i.hide())}).trigger("change"),w(".xts-block select").on("change",function(){var t=w(this).find("option:selected").data("edit-link");t?w(".edit-block-link").attr("href",t).show():w(".edit-block-link").hide()}),w("ul#menu-to-edit li.menu-item").each(function(){var t=w(this),e=t.find(".field-title-attribute"),t=t.find(".xts-mega-menu-custom-fields");e.after(t),t.show()}),w(".xts-mega-menu-image-wrapper").each(function(){var t=w(this),s=t.find(".xts-mega-menu-image-preview"),e=t.find(".xts-mega-menu-upload"),i=t.find(".xts-mega-menu-remove"),n=t.find("input.xts-mega-menu-image-id");e.on("click",function(t){t.preventDefault();var e=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).on("select",function(){var t=e.state().get("selection").first().toJSON();n.val(t.id),s.find("img").remove(),s.prepend('<img src="'+t.url+'" />'),i.addClass("xts-active")}).open()}),i.on("click",function(t){t.preventDefault(),s.find("img").remove(),n.val(""),i.removeClass("xts-active")})})},rangeControl:function(){var t=w(".xts-active-section .xts-range-control");t.length<=0||t.each(function(){var t=w(this),s=t.find(".xts-range-value"),e=t.find(".xts-range-slider"),i=t.find(".xts-range-field-value-text"),n=s.data();t.hasClass("xts-field-inited")||(e.slider({range:"min",value:n.start,min:n.min,max:n.max,step:n.step,slide:function(t,e){s.val(e.value).trigger("change"),i.text(e.value)}}),s.val(e.slider("value")).trigger("change"),i.text(e.slider("value")),t.addClass("xts-field-inited"))})},responsiveRangeControl:function(){var t=w(".xts-active-section .xts-responsive_range-control");function l(t){let e={devices:{}};var s=!1;t.siblings(".xts-responsive-range-wrapper").find(".xts-responsive-range").each(function(){var t=w(this);t.attr("data-value")&&(s=!0),e.devices[t.attr("data-device")]={unit:t.attr("data-unit"),value:t.attr("data-value")}}),s?t.attr("value",window.btoa(JSON.stringify(e))):t.attr("value","")}function a(t){var s=t.find(".xts-range-slider"),i=t.parents(".xts-responsive-range-wrapper").siblings(".xts-responsive-range-value"),e=i.data("settings"),n=t.data("device"),a=t.attr("data-unit"),a=e.range[a],o=t.find(".xts-range-field-value");t.attr("data-value")?a.start=t.attr("data-value"):a.start=e.devices[n].value,void 0!==s.slider()&&s.slider("destroy"),s.slider({range:"min",value:a.start,min:a.min,max:a.max,step:a.step,slide:function(t,e){s.parent().attr("data-value",e.value),o.val(e.value),l(i)}})}t.length<=0||(t.each(function(){w(this).find(".xts-responsive-range").each(function(){a(w(this))})}),t.find(".xts-responsive-switch").on("click",function(){var t=w(this),e=t.parents(".xts-responsive-range-wrapper");t.siblings(".xts-active").removeClass("xts-active"),t.addClass("xts-active"),e.find(".xts-responsive-range").removeClass("xts-active").siblings("[data-device="+t.data("value")+"]").addClass("xts-active")}),t.find(".xts-slider-unit-control").on("click",function(){var t=w(this),e=t.parents(".xts-responsive-range");t.siblings().length&&(t.siblings(".xts-active").removeClass("xts-active"),t.addClass("xts-active"),e.attr("data-unit",t.data("unit")),a(e))}),t.find(".xts-range-field-value").on("change",function(){var t=w(this),e=t.parents(".xts-responsive-range"),s=e.parent().siblings(".xts-responsive-range-value"),i=s.data("settings").range[e.data("unit")],n=t.val();n.length&&(n>=i.max&&(n=i.max,t.val(n)),n<=i.min)&&(n=i.min,t.val(n)),e.attr("data-value",n),l(s),a(e)}))},editorControl:function(){var t=w(".xts-active-section .xts-editor-control");t.length<=0||t.each(function(){var t,e=w(this),s=e.find("textarea"),i=s.data("language");e.hasClass("xts-field-inited")||((t=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{}).codemirror=_.extend({},t.codemirror,{indentUnit:2,tabSize:2,mode:i}),wp.codeEditor.initialize(s,t),e.addClass("xts-field-inited"))})},fieldsDependencies:function(){w(".xts-field[data-dependency]").each(function(){var s=w(this),i=s.data("dependency").split(";");i.forEach(function(t){0!=t.length&&(t=t.split(":"),(t=w(".xts-"+t[0]+"-field")).on("change","input, select",function(t){var e,a;e=s,a=!0,i.forEach(function(t){if(0!=t.length&&0!=a){var e=t.split(":"),s=w(".xts-"+e[0]+"-field").find("input[type=hidden], select").val();switch(e[1]){case"equals":var i=e[2].split(",");a=!1;for(var n=0;n<i.length;n++)s==i[n]&&(a=!0);break;case"not_equals":i=e[2].split(",");a=!0;for(n=0;n<i.length;n++)s==i[n]&&(a=!1)}}}),a?(e.addClass("xts-shown").removeClass("xts-hidden"),e.find(".xts-css-output").val("1")):(e.addClass("xts-hidden").removeClass("xts-shown"),e.find(".xts-css-output").val("0"))}),t.find("input, select").trigger("change"))})})},settingsSearch:function(){var s,i,t=w(".xts-options-search"),e=t.find("input");0!==t.length&&(w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_get_theme_settings_search_data",security:xtsAdminConfig.get_theme_settings_data_nonce},dataType:"json",success:function(t){s=t.theme_settings},error:function(){console.log("AJAX error")}}),t.find("form").on("submit",function(t){t.preventDefault()}),(t=e.autocomplete({source:function(e,t){t(s.filter(function(t){return-1!=t.text.search(new RegExp(e.term,"i"))}).slice(0,16))},select:function(t,e){var s=w(".xts-"+e.item.id+"-field");w('.xts-sections-nav a[data-id="'+e.item.section_id+'"]').click(),w(".xts-highlight-field").removeClass("xts-highlight-field"),s.addClass("xts-highlight-field"),setTimeout(function(){i(s)||w("html, body").animate({scrollTop:s.offset().top-200},400)},300)}}).data("ui-autocomplete"))._renderItem=function(t,e){e='<span class="xts-section-icon '+e.icon+'"></span><span class="xts-setting-title">'+e.title+'</span><br><span class="xts-settting-path">'+e.path+"</span>";return w("<li>").append(e).appendTo(t)},t._renderMenu=function(s,t){var i=this;w.each(t,function(t,e){i._renderItemData(s,e)}),w(s).addClass("xts-settings-result")},i=function(t){var e=t.offset().top,t=e+t.outerHeight(),s=w(window).scrollTop(),i=s+w(window).height();return s<t&&e+200<i})},htmlBlockEditLink:function(){function i(t,e){var t=t.find("option:selected").val(),s=e.attr("href").split("post=")[0]+"post="+t+"&action=elementor";t&&"0"!==t&&0!==t?e.attr("href",s).show():e.hide()}w(".xts-html-block-links").each(function(){var t=w(this),e=t.find("select"),s=t.find(".xts-edit-block-link");0<s.length&&(i(e,s),e.on("change",function(){i(e,s)}))})},imageOptimizer:function(){w("body").on("click",".xts-optimize-image",function(t){t.preventDefault();var s=w(this),t=s.data("id"),e=s.data("security");w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_optimize_image",id:t,security:e},dataType:"json",success:function(t){var e;t.success?((e=s.parent().parent().find(".xts-optimizer-result")).find(".xts-optimizer-original span").text(t.original_size_text),e.find(".xts-optimizer-saved span").text(t.saved_bytes_text),e.find(".xts-optimizer-optimized span").text(t.optimized_size_text),e.removeClass("hidden")):t.errors&&(s.parent().find(".xts-optimization-error").remove(),s.parent().append('<span class="xts-optimization-error">'+t.errors+"</span>"))},complete:function(t){console.log("complete")},error:function(t){console.log("error")}})})},sizeGuideTableControl:function(){var t;w.fn.editTable&&(t=w(".xts-size-guide-table-field textarea").editTable(),setTimeout(function(){w(".editor-post-publish-button, .editor-post-publish-panel__toggle").on("click",function(){w(".xts-size-guide-table-field textarea").val(t.getJsonData())})}))},selectWithTableControl:function(){void 0!==w.fn.select2&&w(".xts-active-section .xts-select_with_table-control").each(function(){var s=w(this);s.on("click",".xts-remove-item",function(t){t.preventDefault(),w(this).parent().parent().remove()}),s.find(".xts-add-row").on("click",function(t){t.preventDefault();var t=s.find(".xts-controls-wrapper"),e=s.find(".xts-item-template").clone();e.find("input, select").each(function(){w(this).prop("disabled",!1)}),e=e.html().replace(/{{index}}/gi,t.find("> div").length),t.append(e),u.selectControl(!1)})})},additionalVariationImages:function(){w("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){w(".xts-avi-wrapper").each(function(){var e,t=w(this),i=t.find(".xts-avi-list"),n=t.find(".xts-variation-gallery-ids");function a(){t.parents(".woocommerce_variation").eq(0).addClass("variation-needs-update"),w("#variable_product_options").find("input").eq(0).trigger("change")}t.find(".xts-avi-add-image").on("click",function(t){t.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({states:[new wp.media.controller.Library({filterable:"all",multiple:!0})]})).on("select",function(){var t=e.state().get("selection"),s=n.val();t.map(function(t){var e;(t=t.toJSON()).id&&(e=(t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail:t).url,s=s?s+","+t.id:t.id,i.append('<div class="xts-avi-image" data-attachment_id="'+t.id+'"><img src="'+e+'"><a href="#" class="xts-avi-remove-image xts-remove"><span class="dashicons dashicons-dismiss"></span></a></li>'))}),n.val(s),a()}),e.open()}),void 0!==i.sortable&&i.sortable({items:"div.xts-avi-image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){var e="";i.find("div.xts-avi-image").each(function(){var t=w(this).attr("data-attachment_id");e=e+t+","}),n.val(e),a()}}),w(document).on("click",".xts-avi-remove-image",function(t){t.preventDefault(),w(this).parent().remove();var e="";i.find("div.xts-avi-image").each(function(){var t=w(this).attr("data-attachment_id");e=e+t+","}),n.val(e),a()})})})},responsiveFields:function(){w(".xts-field-responsive-selector").on("click",".xts-responsive-switch",function(){var t=w(this),e=t.parents(".xts-field"),s=e.data("id").split("_tablet")[0].split("_mobile")[0].split("_mobile_small")[0];e.hasClass("xts-responsive_range-control")||(w(".xts-"+s+"-field").hide(),w(".xts-"+s+"_tablet-field").hide(),w(".xts-"+s+"_mobile-field").hide(),w(".xts-"+s+"_mobile_small-field").hide(),(t.hasClass("xts-switch-tablet")?w(".xts-"+s+"_tablet-field"):t.hasClass("xts-switch-mobile")?w(".xts-"+s+"_mobile-field"):t.hasClass("xts-switch-mobile_small")?w(".xts-"+s+"_mobile_small-field"):w(".xts-"+s+"-field")).show())}),w(".xts-inherit-checkbox-wrapper input").on("change",function(){var t,e,s,i,n,a,o=w(this).parents(".xts-field"),l=o.data("id").split("_tablet")[0].split("_mobile")[0];(o.hasClass("xts-desktop-field")||o.hasClass("xts-tablet-field")||o.hasClass("xts-mobile-field")||o.hasClass("xts-mobile_small-field"))&&(o=w(".xts-"+l+"_tablet-field"),t=w(".xts-"+l+"_mobile-field"),e=w(".xts-"+l+"_mobile_small-field"),l=w(".xts-"+l+"-field"),s=o.find(".xts-inherit-checkbox-wrapper input"),i=t.find(".xts-inherit-checkbox-wrapper input"),n=e.find(".xts-inherit-checkbox-wrapper input"),a=l.find(".xts-inherit-checkbox-wrapper input"),w(this).prop("checked")?(o.addClass("xts-field-disabled"),t.addClass("xts-field-disabled"),e.addClass("xts-field-disabled"),l.addClass("xts-field-disabled"),s.prop("checked",!0),i.prop("checked",!0),n.prop("checked",!0),a.prop("checked",!0)):(o.removeClass("xts-field-disabled"),t.removeClass("xts-field-disabled"),e.removeClass("xts-field-disabled"),l.removeClass("xts-field-disabled"),s.prop("checked",!1),i.prop("checked",!1),n.prop("checked",!1),a.prop("checked",!1)),u.optionsPresetsCheckbox(s),u.optionsPresetsCheckbox(i),u.optionsPresetsCheckbox(n),u.optionsPresetsCheckbox(a))})},presetsActive:function(){function s(){w(".xts-sections-nav li").each(function(){var t=w(this),e=t.find("a").data("id");w('.xts-fields-section[data-id="'+e+'"]').find(".xts-inherit-checkbox-wrapper input").each(function(){w(this).prop("checked")||t.addClass("xts-not-inherit")})})}function i(){w(".xts-sections-nav .xts-has-child").each(function(){var t=!1;(t=0<w(this).find(".xts-not-inherit").length?!0:t)?w(this).addClass("xts-not-inherit"):w(this).removeClass("xts-not-inherit")})}s(),i(),w(".xts-inherit-checkbox-wrapper input").on("change",function(){var t=w(this).parents(".xts-fields-section").data("id"),e=!1;w(this).parents(".xts-fields-section").find(".xts-inherit-checkbox-wrapper input").each(function(){w(this).prop("checked")||(e=!0)}),e?w('.xts-sections-nav li a[data-id="'+t+'"]').parent().addClass("xts-not-inherit"):w('.xts-sections-nav li a[data-id="'+t+'"]').parent().removeClass("xts-not-inherit"),i(),s()})},hideNotice:function(){var t=w(".xts-notice:not(.xts-info, .xts-patcher-notice)");t.each(function(){var t=w(this);setTimeout(function(){t.addClass("xts-hidden")},1e4)}),t.on("click",function(){w(this).addClass("xts-hidden")})},textAreaControl:function(){var n=w(".xts-active-section .xts-textarea-wysiwyg");n.length<=0||n.each(function(){var i,t=w(this),e=t.attr("id"),s=wp.editor.getDefaultSettings();t.hasClass("xts-field-inited")||(s.tinymce.selector="#"+e,s.tinymce.branding=!1,s.tinymce.toolbar="mybutton",s.tinymce.paste_text_sticky=!0,s.tinymce.menubar=!1,s.tinymce.force_br_newlines=!1,s.tinymce.force_p_newlines=!1,s.tinymce.forced_root_block="",s.tinymce.plugins="charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wpdialogs,wptextpattern,wpview",s.tinymce.toolbar1="formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,wp_more,spellchecker,fullscreen,wp_adv",s.tinymce.toolbar2="strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",window.tinymce.init(s.tinymce),w(".xts-wysiwyg-buttons button").on("click",function(t){t.preventDefault();var t=w(this),e=t.data("id"),s=t.data("mode");t.siblings().removeClass("xts-btns-set-active"),t.addClass("xts-btns-set-active"),i(e,s)}),i=function(t,e){var s=tinymce.get(t),t=w("#"+t);"visual"===e?(t.attr("aria-hidden",!0),s.show(),window.setUserSetting("editor","tinymce")):"text"===e&&(s.hide(),window.setUserSetting("editor","html"),t.css({display:"",visibility:""}),t.attr("aria-hidden",!1))},n.addClass(t))})},pluginActivation:function(){function s(e){w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_deactivate_plugin",xts_plugin:e.data("plugin")},success:function(t){"error"===t.status?(u.addNotice(w(".xts-plugin-response"),"warning",t.message),l(e),u.hideNotice()):i(e,function(t){"success"===t.status&&("activate"===t.data.status?(l(e),r("deactivate","activate",e,t)):s(e))})}})}var i=function(i,n){setTimeout(function(){w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_check_plugins",xts_plugin:i.data("plugin")},success:function(t){var e,s;"success"===t.status?(e=t.data.required_plugins,s=w(".xts-next-btn"),"has_required"===e?s.addClass("xts-disabled"):s.removeClass("xts-disabled"),e=t.data.is_all_activated,s=w(".xts-plugins"),"yes"===e?s.addClass("xts-all-active"):s.removeClass("xts-all-active")):(u.addNotice(w(".xts-plugin-response"),"warning",t.message),l(i),u.hideNotice()),n(t)}})},1e3)},n=function(e,s){w.ajax({url:xtsPluginsData[e.data("plugin")].activate_url.replaceAll("&amp;","&"),method:"GET",success:function(){i(e,function(t){"success"===t.status&&("activate"===t.data.status?n(e,s):(l(e),r("activate","deactivate",e,t),r("install","deactivate",e,t),r("update","deactivate",e,t),s()))})}})};function a(e,s){w.ajax({url:e.attr("href"),method:"POST",success:function(){setTimeout(function(){i(e,function(t){"success"===t.status&&("activate"===t.data.status?n(e,s):(l(e),r("activate","deactivate",e,t),s()))})},1e3)}})}function o(t){t.parents(".xts-plugin-wrapper").addClass("xts-loading"),t.parents(".xts-plugin-wrapper").siblings().addClass("xts-disabled"),w(".xts-ajax-all-plugins").addClass("xts-disabled"),w(".xts-dashboard-box-footer").addClass("xts-disabled"),t.text(xtsAdminConfig[t.data("action")+"_process_plugin_btn_text"])}function l(t){t.parents(".xts-plugin-wrapper").removeClass("xts-loading"),t.parents(".xts-plugin-wrapper").siblings().removeClass("xts-disabled"),w(".xts-ajax-all-plugins").removeClass("xts-disabled"),w(".xts-dashboard-box-footer").removeClass("xts-disabled")}function r(t,e,s,i){i&&i.data.version&&s.parents(".xts-plugin-wrapper").find(".xts-plugin-version").text(i.data.version),s.removeClass("xts-"+t+"-now").addClass("xts-"+e+"-now"),s.attr("href",xtsPluginsData[s.data("plugin")][e+"_url"].replaceAll("&amp;","&")),s.data("action",e),s.text(xtsAdminConfig[e+"_plugin_btn_text"])}w(document).on("click",".xts-ajax-plugin:not(.xts-deactivate-now)",function(t){t.preventDefault();t=w(this);o(t),a(t,function(){})}),w(document).on("click",".xts-deactivate-now",function(t){t.preventDefault();t=w(this);o(t),s(t)}),w(document).on("click",".xts-ajax-all-plugins",function(t){t.preventDefault();var s=[];w(".xts-plugin-wrapper .xts-ajax-plugin:not(.xts-deactivate-now)").each(function(){s.push(w(this))}),function t(){var e;s.length&&(o(e=w(s.shift())),a(e,function(){t()}))}()})},childThemeActivation:function(){w(".xts-install-child-theme").on("click",function(t){t.preventDefault();var e=w(this),s=w(".xts-child-theme-response");e.addClass("xts-loading"),w.ajax({url:xtsAdminConfig.ajaxUrl,method:"POST",data:{action:"xts_install_child_theme"},dataType:"json",success:function(t){e.removeClass("xts-loading"),t&&"success"===t.status?w(".xts-child-step").addClass("xts-installed"):t&&"dir_not_exists"===t.status?u.addNotice(s,"error","The directory can't be created on the server. Please, install the child theme manually or contact our support for help."):u.addNotice(s,"error","The child theme can't be installed. Skip this step and install the child theme manually via Appearance -> Themes.")},error:function(){e.removeClass("xts-loading"),u.addNotice(s,"error","The child theme can't be installed. Skip this step and install the child theme manually via Appearance -> Themes.")}})})},addNotice:function(t,e,s){t.html('<div class="xts-notice xts-'+e+'">'+s+"</div>").fadeIn(),u.hideNotice()},whiteLabel:function(){setTimeout(function(){function t(){w(".theme-overlay .theme-name").text().includes(xtsAdminConfig.theme_slug)?w(".theme-overlay").addClass("xts-space-theme"):w(".theme-overlay").removeClass("xts-space-theme")}w(".theme").on("click",function(){t()}),t()},500)}},xtsFramework={init:function(){w(document).ready(function(){u.hideNotice(),u.megaMenu(),u.pluginActivation(),u.childThemeActivation(),u.whiteLabel(),u.additionalVariationImages(),u.optionsPage(),u.optionsPresets(),u.presetsActive(),u.settingsSearch(),u.responsiveFields(),u.fieldsDependencies(),u.htmlBlockEditLink(),u.sizeGuideTableControl(),u.selectWithTableControl(),u.uploadControl(!0),u.uploadListControl(!0),u.selectControl(!0)}),w(document).on("widget-updated widget-added",function(t,e){u.uploadControl(!0),u.uploadListControl(!0),u.selectControl(!0)}),w(document).on("xts_section_changed",function(){setTimeout(function(){u.typographyControlInit()}),u.customFontsControl(),u.backgroundControl(),u.switcherControl(),u.buttonsControl(),u.checkboxControl(),u.uploadControl(!1),u.uploadListControl(!1),u.selectControl(!1),u.editorControl(),u.textAreaControl(),u.colorControl(),u.rangeControl(),u.responsiveRangeControl()})}}}(jQuery),jQuery(document).ready(function(){xtsFramework.init()});